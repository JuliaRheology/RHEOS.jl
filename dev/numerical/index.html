<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Numerical Aspects · RHEOS.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RHEOS.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">RHEOS.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../architecture/">Architecture</a></li><li><a class="tocitem" href="../fileio/">File I/O</a></li><li><a class="tocitem" href="../preprocessing/">Preprocessing</a></li><li><a class="tocitem" href="../gendata/">Generating Data</a></li><li><span class="tocitem">Fit and Predict</span><ul><li><a class="tocitem" href="../fitpredictTime/">Time data</a></li><li><a class="tocitem" href="../fitpredictFreq/">Frequency data</a></li></ul></li><li class="is-active"><a class="tocitem" href>Numerical Aspects</a><ul class="internal"><li><a class="tocitem" href="#Constant-vs.-Variable-Sample-Rate-1"><span>Constant vs. Variable Sample Rate</span></a></li></ul></li><li><span class="tocitem">Models</span><ul><li><a class="tocitem" href="../model_elements/">Basic Elements</a></li><li><a class="tocitem" href="../model_maxwell/">Maxwell</a></li><li><a class="tocitem" href="../model_kv/">Kelvin-Voigt</a></li><li><a class="tocitem" href="../model_zener/">Zener</a></li><li><a class="tocitem" href="../model_pt/">Poynting-Thomson</a></li><li><a class="tocitem" href="../model_burgers/">Burgers</a></li><li><a class="tocitem" href="../model_create/">Create Your Model</a></li></ul></li><li><a class="tocitem" href="../examples/">Additional Examples</a></li><li><a class="tocitem" href="../API/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Numerical Aspects</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Numerical Aspects</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaRheology/RHEOS.jl/blob/master/docs/src/numerical.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Numerical-Aspects-1"><a class="docs-heading-anchor" href="#Numerical-Aspects-1">Numerical Aspects</a><a class="docs-heading-anchor-permalink" href="#Numerical-Aspects-1" title="Permalink"></a></h1><p><a href="https://mybinder.org/v2/gh/JuliaRheology/RHEOS.jl/gh-pages?filepath=dev/notebooks/numerical.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt/></a> <a href="https://nbviewer.jupyter.org/github/JuliaRheology/RHEOS.jl/blob/gh-pages/dev/notebooks/numerical.ipynb"><img src="https://img.shields.io/badge/show-nbviewer-579ACA.svg" alt/></a></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This section is still under development.</p></div></div><pre><code class="language-julia">using RHEOS</code></pre><h2 id="Constant-vs.-Variable-Sample-Rate-1"><a class="docs-heading-anchor" href="#Constant-vs.-Variable-Sample-Rate-1">Constant vs. Variable Sample Rate</a><a class="docs-heading-anchor-permalink" href="#Constant-vs.-Variable-Sample-Rate-1" title="Permalink"></a></h2><h4 id="Weight-indices-rather-than-using-a-variable-sample-rate-1"><a class="docs-heading-anchor" href="#Weight-indices-rather-than-using-a-variable-sample-rate-1">Weight indices rather than using a variable sample rate</a><a class="docs-heading-anchor-permalink" href="#Weight-indices-rather-than-using-a-variable-sample-rate-1" title="Permalink"></a></h4><p>There may be situations when it is appropriate to focus the model fitting process on particular regions of the data. This may occur, for example, when the small time scale loading region is of particular interest. To achieve this, we could send data to fit that is sampled variably, with a greater sample density near the region of interest. However, the variable sampling rate means that the method RHEOS uses to compute the model predictions is slower and less accurate.</p><p>A more optimal solution is to send constant sample rate data to the fitting function, but ask RHEOS to modify the final cost function to focus on specific points. In this way, RHEOS will be able to benefit from the much faster and more accurate constant sample rate model simulation methods.</p><p>In concrete terms, consider the following array of time samples:</p><pre><code class="language-julia">t = [0.0, 0.1, 0.2, 0.3, 0.4, 0.5];</code></pre><p>We can send another array to the fitting process, <code>weightings</code>, that tells RHEOS to weight the first three time samples as doubly important, and the subsequent samples as half as important. The array we send would look like this:</p><pre><code class="language-julia">weightings = [1, 1, 2, 2, 3, 3, 4, 6];</code></pre><p>In words, the elements in the time region we are particularly concerned about (0 ≤ t ≤ 0.2) are considered twice in the final fitting cost function, whereas we only consider every other element for times after 0.2 seconds.</p><p>For practical situations, when working with data embedded in <a href="../API/#RHEOS.RheoTimeData"><code>RheoTimeData</code></a> structs, RHEOS has a convenience function <a href="../API/#RHEOS.indexweight"><code>indexweight</code></a> which makes it easy to generate a weightings array that can then be passed to either <a href="../API/#RHEOS.modelfit"><code>modelfit</code></a> or <a href="../API/#RHEOS.modelstepfit"><code>modelstepfit</code></a>. The full description of <a href="../API/#RHEOS.indexweight"><code>indexweight</code></a> can be found in the <a href="../API/#API-1">API</a> section. Below, we include a typical example of its use, based on the same data used in <a href="../fitpredictTime/#Fitting-and-Predicting-Time-Data-1">Fitting and Predicting - Time Data</a>.</p><pre><code class="language-julia"># As in original example, load in the data
data = importcsv(&quot;assets/data_time.csv&quot;, t_col = 1, ϵ_col = 2, σ_col = 3)
rheotimedatatype(data)</code></pre><pre><code class="language-none">strain_and_stress::TimeDataType = 3</code></pre><p>Now instead of going straight to fitting, we will construct a weightings array using <a href="../API/#RHEOS.indexweight"><code>indexweight</code></a>.</p><pre><code class="language-julia"># construct weighted array
weightings = indexweight(data; elperiods = [2, 3, -2], time_boundaries = [0.0, 0.5, 1.0, data.t[end]])

# fit model with weighted array
modelfit(data, Maxwell, strain_imposed, weights = weightings)</code></pre><pre><code class="language-none">
Model: maxwell

Parameter values: (η = 4.002691805362701, k = 2.0012391805648804) 

                ___
            _____| |________╱╲  ╱╲  ╱╲  ___
                _|_|          ╲╱  ╲╱  ╲╱
                  η                  k
               </code></pre><p>We note that the results are slightly different from the original example in <a href="../fitpredictTime/#Fitting-and-Predicting-Time-Data-1">Fitting and Predicting - Time Data</a> due to the element weighting provided to the fitting function.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../fitpredictFreq/">« Frequency data</a><a class="docs-footer-nextpage" href="../model_elements/">Basic Elements »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 2 April 2021 10:56">Friday 2 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
